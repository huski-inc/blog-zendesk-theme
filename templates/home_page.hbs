<h1 class="visibility-hidden">{{ help_center.name }}</h1>

<div class="container">

  {{#each (filter promoted_articles on="id" equals=4483678577945)}}
    <div class="home-hero">
      <div class="article-cover-init" title="{{title}}">{{ body }}</div>
    </div>
    <div class="fx-between f-14 pt-5">
      <span class="color-text-light-1">PRODUCT INTRODUCTION</span>
      <span class="color-text-light">{{date updated_at format='short'}}</span>
    </div>
    <h3 class="f-28"><a href="{{url}}" class="article-title" target="_blank">{{title}}</a></h3>
    <p class="f-12" class="color-text-light">{{excerpt body characters=140}}</p>
  {{/each}}
   <div class="divider mt-30 mb-30"></div>
</div>
{{!-- <section id="main-content" class="section hero">
  <div class="hero-inner">
    <h2 class="visibility-hidden">{{ t 'search' }}</h2>
    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" focusable="false" viewBox="0 0 12 12" class="search-icon" aria-hidden="true">
      <circle cx="4.5" cy="4.5" r="4" fill="none" stroke="currentColor"/>
      <path stroke="currentColor" stroke-linecap="round" d="M11 11L7.5 7.5"/>
    </svg>
    {{search submit=false instant=settings.instant_search class='search search-full'}}
  </div>
</section> --}}

<div class="container">
  <section class="section knowledge-base">
    <h2 class="visibility-hidden">{{ t 'categories' }}</h2>
    <section class="categories blocks">
      <ul class="blocks-list">
        {{#each categories}}
          {{#if ../has_multiple_categories}}
            <li class="blocks-item">
              <a href='{{url}}' class="blocks-item-link">
                <span class="blocks-item-title">{{name}}</span>
                <span class="blocks-item-description">{{excerpt description}}</span>
              </a>
            </li>
          {{else}}
            {{#each sections}}
              <li class="blocks-item">
                <a href='{{url}}' class="blocks-item-link">
                  <span class="blocks-item-title">
                    {{name}}
                  </span>
                  <span class="blocks-item-description">{{excerpt description}}</span>
                </a>
              </li>
            {{/each}}
          {{/if}}
        {{/each}}
      </ul>
      {{pagination}}
    </section>

    {{#if promoted_articles}}
      <section class="articles">
        <h2>{{t 'promoted_articles'}}</h2>
        <ul class="article-list promoted-articles">
          {{#each promoted_articles}}
            <li class="promoted-articles-item">
                <a href="{{url}}">
                  {{title}}

                  {{#if internal}}
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" focusable="false" viewBox="0 0 16 16" class="icon-lock" title="{{t 'internal'}}">
                      <rect width="12" height="9" x="2" y="7" fill="currentColor" rx="1" ry="1"/>
                      <path fill="none" stroke="currentColor" d="M4.5 7.5V4a3.5 3.5 0 017 0v3.5"/>
                    </svg>
                  {{/if}}
                </a>
            </li>
          {{/each}}
        </ul>
      </section>
    {{/if}}
  </section>

  {{#if help_center.community_enabled}}
    <section class="section home-section community">
      <h2>{{t 'community'}}</h2>
      {{#link 'community' class='community-link'}}
        {{t 'join_conversation'}}
      {{/link}}

      <div class="community-image"></div>
    </section>
  {{/if}}

  <section class="section home-section activity">
    {{#if settings.show_recent_activity}}
      {{recent_activity}}
    {{/if}}
  </section>
</div>

<script>
  const getFirstImage = function(str){
      let data = '';
      str.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/, function (match, capture) {
                  data =  capture;
            });
      return data
  }
  // 将文章body第一章图片显示出来
  const articleBody=document.querySelectorAll('.article-cover-init')
  for(let i=0;i<articleBody.length;i++){
    const body=articleBody[i]
    const bodyHtml= body.innerHTML
    if(bodyHtml){
      const imageUrl= getFirstImage(bodyHtml)
      body.innerHTML=`<img src="${imageUrl}"/>`
      body.setAttribute("class", "article-cover");

    }
  }
</script>